<section class="story-section">
  <div class="story-background-text">{{ section.settings.background_text }}</div>

  <div class="story-container">
    <div class="story-card">
      <div class="story-header">
        <h2 class="story-title">{{ section.settings.story_title }}</h2>

        <div class="story-image-wrapper">
          {% if section.settings.story_image %}
            {{
              section.settings.story_image
              | image_url: width: 350
              | image_tag: class: 'story-image', alt: 'Grandmother'
            }}
          {% endif %}
        </div>
      </div>

      <div class="story-content">
        {% if section.settings.story_text != blank %}
          <p class="story-text">{{ section.settings.story_text }}</p>
        {% endif %}

        {% if section.settings.button_text != blank and section.settings.button_url != blank %}
          <a href="{{ section.settings.button_url }}" class="story-button">
            {{ section.settings.button_text }}
          </a>
        {% endif %}
      </div>
    </div>
  </div>

  <div class="story-wave">
    <svg height="64" viewBox="0 0 1440 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M-444 5.53835C-423.06 -1.84612 -402.12 -1.84612 -381.18 5.53835C-360.24 12.9228 -339.3 12.9228 -318.36 5.53837C-297.42 -1.8461 -276.48 -1.8461 -255.54 5.53837C-234.6 12.9228 -213.66 12.9228 -192.72 5.53839C-171.78 -1.84609 -150.84 -1.84609 -129.9 5.53839C-108.96 12.9228 -88.02 12.9228 -67.08 5.53839C-46.14 -1.84609 -25.2 -1.84607 -4.25998 5.5384C16.68 12.9228 37.62 12.9228 58.56 5.5384C79.5 -1.84607 100.44 -1.84605 121.38 5.53842C142.32 12.9228 163.26 12.9228 184.2 5.53842C205.14 -1.84605 226.08 -1.84605 247.02 5.53843C267.96 12.9228 288.9 12.9228 309.84 5.53843C330.78 -1.84604 351.72 -1.84604 372.66 5.53843C393.6 12.923 414.54 12.923 435.48 5.53845C456.42 -1.84602 477.36 -1.84602 498.3 5.53845C519.24 12.923 540.18 12.923 561.12 5.53845C582.06 -1.84601 603 -1.84601 623.94 5.53847C644.88 12.923 665.82 12.923 686.76 5.53847C707.7 -1.84599 728.64 -1.84599 749.58 5.53848C770.52 12.923 791.46 12.923 812.4 5.53848C833.34 -1.84599 854.28 -1.84599 875.22 5.5385C896.16 12.923 917.1 12.923 938.04 5.5385C958.98 -1.84597 979.92 -1.84597 1000.86 5.5385C1021.8 12.923 1042.74 12.923 1063.68 5.53851C1084.62 -1.84596 1105.56 -1.84596 1126.5 5.53851C1147.44 12.923 1168.38 12.923 1189.32 5.53853C1210.26 -1.84594 1231.2 -1.84594 1252.14 5.53853C1273.08 12.923 1294.02 12.923 1314.96 5.53855C1335.9 -1.84593 1356.84 -1.84593 1377.78 5.53855C1398.72 12.923 1419.66 12.923 1440.6 5.53855C1461.54 -1.84593 1482.48 -1.84593 1503.42 5.53856C1524.36 12.923 1545.3 12.923 1566.24 5.53856C1587.18 -1.84591 1608.12 -1.84591 1629.06 5.53858C1650 12.923 1670.94 12.923 1691.88 5.53858C1712.82 -1.84589 1733.76 -1.84589 1754.7 5.53858C1775.64 12.923 1796.58 12.923 1817.52 5.53859C1838.46 -1.84588 1859.4 -1.84588 1880.34 5.53859C1901.28 12.9231 1922.22 12.9231 1943.16 5.53861C1964.1 -1.84586 1985.04 -1.84586 2005.98 5.53861C2026.92 12.9231 2047.86 12.9231 2068.8 5.53861C2089.74 -1.84586 2110.68 -1.84585 2131.62 5.53863C2152.56 12.9231 2173.5 12.9231 2194.44 5.53863C2215.38 -1.84585 2236.32 -1.84583 2257.26 5.53864C2278.2 12.9231 2299.14 12.9231 2320.08 5.53864C2341.02 -1.84583 2361.96 -1.84583 2382.9 5.53866C2403.84 12.9231 2424.78 12.9231 2445.72 5.53866C2466.66 -1.84581 2487.6 -1.84581 2508.54 5.53866C2529.48 12.9231 2550.42 12.9231 2571.36 5.53867C2592.3 -1.8458 2613.24 -1.8458 2634.18 5.53867C2655.12 12.9231 2676.06 12.9231 2697 5.53869V24H-444V5.53835Z" fill="#FED2D7"/>
    </svg>
  </div>
</section>

{% style %}
  .story-section {
    position: relative;
    display: flex;
    align-items: center;
    padding: 120px 0 0px;
    background: {{ section.settings.bg_color }};
    overflow: hidden;
  }

  .story-background-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-family: 'True North Black', 'Arial Black', Impact, sans-serif;
    font-weight: 400;
    font-size: 200px;
    line-height: 90%;
    text-align: center;
    letter-spacing: -0.04em;
    text-transform: uppercase;
    color: {{ section.settings.background_text_color }};
    opacity: 0.5;
    z-index: 0;
    pointer-events: none;
    white-space: pre-line;
    width: 2245px;
    height: 501px;
  }

  .story-container {
    position: relative;
    z-index: 1;
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
  }

  .story-card {
    width: 660px;
    background: linear-gradient(180deg, rgba(255, 208, 214, 0) 74.32%, rgba(255, 208, 214, 0.24) 100%), {{ section.settings.card_bg_color }};
    border-radius: 32px;
    padding: 32px 32px 96px;
    display: flex;
    flex-direction: column;
    gap: 32px;
  }

  .story-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 32px;
    position: relative;
  }

  .story-title {
    font-family: 'True North Black', 'Arial Black', Impact, sans-serif;
    font-weight: 400;
    font-size: 40px;
    line-height: 90%;
    letter-spacing: -0.04em;
    text-transform: uppercase;
    color: {{ section.settings.text_color }};
    margin: 0;
    width: 448px;
  }

  .story-image-wrapper {
    position: relative;
    width: 161px;
    height: 108px;
    flex-shrink: 0;
  }

  .story-image {
    position: absolute;
    width: 175px;
    height: 175px;
    left: 50%;
    top: -68px;
    transform: translateX(-50%);
    object-fit: contain;
  }

  .story-content {
    display: flex;
    flex-direction: column;
    gap: 32px;
  }

  .story-text {
    font-family: 'Open Sauce Sans', sans-serif;
    font-weight: 500;
    font-size: 18px;
    line-height: 190%;
    color: {{ section.settings.text_color }};
    margin: 0;
    white-space: pre-line;

  }

  .story-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 14px 32px;
    border: 1px solid {{ section.settings.text_color }};
    border-radius: 50px;
    font-family: 'True North Black', 'Arial Black', Impact, sans-serif;
    font-weight: 400;
    font-size: 14px;
    line-height: 100%;
    text-transform: uppercase;
    color: {{ section.settings.text_color }};
    text-decoration: none;
    width: fit-content;
    transition: all 0.3s ease;
  }

  .story-button:hover {
    background: {{ section.settings.text_color }};
    color: {{ section.settings.card_bg_color }};
  }

  .story-wave {
    position: absolute;
    bottom: -12px;
    left: 50%;
    transform: translateX(-50%);
    width: 100vw;
    height: 32px;
    z-index: 3;
  }

  .story-wave svg {
    display: block;
    width: 100%;
    height: 100%;
    min-width: 1440px;
  }

  @media screen and (max-width: 1024px) {
    .story-section {
      padding: 80px 40px 0;
    }

    .story-background-text {
      font-size: 120px;
    }

    .story-card {
      width: 100%;
      max-width: 600px;
    }

    .story-title {
      width: 100%;
      font-size: 32px;
    }
  }

  @media screen and (max-width: 768px) {
    .story-section {
      padding: 64px 16px 0;
    }

    .story-background-text {
      font-size: 80px;
    }

    .story-card {
      padding: 80px 24px 24px;
    }

    .story-header {
      flex-direction: column;
      text-align: left;
      gap: 24px;
    }

    .story-image-wrapper {
      width: 175px;
      height: 120px;
      order: -1;
      margin-top: -60px;
    }

    .story-image {
      width: 175px;
      height: 175px;
      top: -55px;
      position: absolute;
      left: 50%;
      transform: translateX(-90%);
    }

    .story-title {
      font-size: 28px;
      width: 100%;
    }

    .story-text {
      font-size: 16px;
      line-height: 160%;
    }
  }
{% endstyle %}

{% schema %}
{
  "name": "Story Section",
  "tag": "section",
  "class": "section-story",
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "background_text",
      "label": "Background Text",
      "default": "behind every great recipe, there's a grandmother"
    },
    {
      "type": "text",
      "id": "story_title",
      "label": "Story Title",
      "default": "behind every great\nrecipe, there's a\ngrandmother"
    },
    {
      "type": "textarea",
      "id": "story_text",
      "label": "Story Text",
      "default": "We call ours \"Cuddy\". Cuddy came up with a unique blend of gourmet ingredients that forms the foundation of these delightful snack clusters. Today, as a testament to our commitment to quality, we take pride in being a family-owned business, handcrafting each batch of our delicious snacks with utmost care and devotion.\n\nIt all began with holiday cheer, tummies full of homemade goods, and one heck of a great recipe. Brad and Katie Cocklin founded Chunk Nibbles in 2018 based on their passion to spread joy and to share a secret family recipe with the rest of the world."
    },
    {
      "type": "image_picker",
      "id": "story_image",
      "label": "Grandmother Image"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Read more"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button URL"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#FFB1BB"
    },
    {
      "type": "color",
      "id": "card_bg_color",
      "label": "Card Background Color",
      "default": "#FDE8E6"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#9B3462"
    },
    {
      "type": "color",
      "id": "background_text_color",
      "label": "Background Text Color",
      "default": "#FDE8E6"
    },
    {
      "type": "color",
      "id": "wave_color",
      "label": "Wave Color",
      "default": "#FED2D7"
    }
  ],
  "presets": [
    {
      "name": "Story Section"
    }
  ]
}
{% endschema %}
